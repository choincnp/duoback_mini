<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
          .box{
              background-color: gray;
          }
    </style>
    <script>
      const getplaylist =() => {
        $.ajax({
          type:'GET',
          url:'/',
          data:{},
          success:function(response){

          }
        });
      };
      const addplaylist =() => {
        const title = $('.temp')['title']
        const thumbnail = $('.temp')['thumbnails']
        const id = $('.temp')['id']
        const owner = $('.temp')['owner']
        const duration = $('.temp')['duration']
        $.ajax({
              type:'POST',
              url:'/addList',
              data:{'title_give' : title, 'thumbnail_give' : thumbnail, 'id_give' : id, 'owner_give':owner, 'duration_give':duration },
              success:function(response){
                alert(response['msg']);
              }
          });
      };
      const getMusic = () => {
        const query = $('.searchInput').val();
        $.ajax({
          type: 'GET',
          url: '/search',
          data: { query: query },
          success: function (response) {
            const {data: HTMLData} = response;
            const musicDatas = musicDataParser(HTMLData);
            for (let i = 0; i < 5; i++) {
              let thumbnails = musicDatas[i].thumbnail
              let title = musicDatas[i].title
              let id = musicDatas[i].id
              let num = i
              let owner = musicDatas[i].owner
              let duration = musicDatas[i].duration
              let temp_html = `<span id="temp">
                               <img id = 'thumb' src = "${thumbnails}" alt = '검색어에 대한 사진 설명입니다.'><br>
                              <button style="border-radius: 7px;" onclick = 'addplaylist()'> Post music data </button><br>
                              <a id = 'aid'>${id}</a><br>
                              <a id ='num'>${num}<br>
                              <a id = 'owner'>${owner}</a><br>
                              <a id = 'duration'>${duration}</a><br>
                              <button onclick= 'clean()'>clean</button>
                              <a id = 'title' style="color: midnightblue">${title}</a>
                              </span>`
              $('.video-container').append(temp_html)
            }
          },
        });
      };

      function clean() {
          $('.video-container').empty()
      }

      const createVideo = (id) => {
        return `
                <iframe height="300" autoplay loop src="https://www.youtube.com/embed/${id}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            `;
      };
    </script>
  </head>
  <body>
  <div id="youtube">
      <iframe
      height="300"
      src="https://www.youtube.com/embed/w9JE8b-84UI?rel=0&autoplay=1;playlist=BYyVDi8BpZw"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen
    ></iframe>
  </div>
    <div class="video-container"></div>
    <input class="searchInput" placeholder="Search To play" type="text" />
    <input class="music" onclick="getMusic()" value="search" type="button" value="button" />
  </body>
  <script src="../static/js/dataTrimmer.js"></script>
  <script src="../static/js/musicDataParser.js"></script>
  <button onclick="add()"></button>
</html>
